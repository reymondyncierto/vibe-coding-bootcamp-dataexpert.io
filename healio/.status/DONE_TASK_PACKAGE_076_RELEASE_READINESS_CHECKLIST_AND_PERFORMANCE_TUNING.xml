<?xml version="1.0" encoding="UTF-8"?>
<task_packages>
    <task_package>
        <metadata>
            <id>HEALIO-076</id>
            <title>Create Release Readiness Checklist and Performance Tuning Pass</title>
            <domain>Launch Readiness</domain>
            <estimated_time>45 mins</estimated_time>
            <priority>high</priority>
            <status>DONE</status>
            <is_done>true</is_done>
            <verification_status>PASSED</verification_status>
            <dependencies>HEALIO-054, HEALIO-055, HEALIO-068, HEALIO-069, HEALIO-070, HEALIO-071, HEALIO-072, HEALIO-073, HEALIO-074, HEALIO-075</dependencies>
            <prd_reference>6 System Design performance targets; 10 Milestone Plan phases 5-6</prd_reference>
        </metadata>
        <context>
            <background>This task implements Create Release Readiness Checklist and Performance Tuning Pass for Healio and is scoped as one atomic work item aligned to the PRD. It should be completed within 45 mins and leave clear evidence for follow-on tasks.</background>
            <files_involved>
                <file>healio/README.md</file>
                <file>healio/docs/release-checklist.md</file>
                <file>healio/lib/query-client.ts</file>
                <file>healio/services/analyticsService.ts</file>
                <file>healio/next.config.js</file>
            </files_involved>
            <related_api_endpoints>
                <endpoint>GET /api/v1/health</endpoint>
                <endpoint>Core production routes</endpoint>
            </related_api_endpoints>
            <design_constraints>
                <constraint>Follow the PRD architecture/security conventions and keep outputs compatible with the Healio design system and response envelopes.</constraint>
            </design_constraints>
        </context>
        <instruction>
            <step>Implement the scoped changes for Create Release Readiness Checklist and Performance Tuning Pass in the planned files (healio/README.md, healio/docs/release-checklist.md, healio/lib/query-client.ts, healio/services/analyticsService.ts ...) while preserving the PRD-aligned project structure.</step>
            <step>Apply validation, error handling, and consistent response/UI behavior so the task output integrates cleanly with existing helpers and patterns.</step>
            <step>Wire integrations and dependencies for this task (endpoints: GET /api/v1/health, Core production routes) and keep tenant scoping/RBAC/security expectations intact where applicable.</step>
            <step>Add or update focused tests (unit/integration) for critical business rules, idempotency, or security behavior introduced by this task.</step>
            <step>Document assumptions and any follow-on schema/API contracts in code comments or lightweight docs when they affect downstream tasks.</step>
            <validation_checklist>
                <check>Exercise the related endpoint(s): GET /api/v1/health, Core production routes and verify response shape/status codes.</check>
                <check>Run lint/typecheck or the smallest relevant test suite for the files changed by this task.</check>
                <check>Validate security/tenant behavior with at least one negative test or rejection scenario when applicable.</check>
                <check>Record evidence of persistence/side effects (DB row change, log entry, webhook event handling, cache behavior, etc.) as applicable.</check>
            </validation_checklist>
        </instruction>
        <output_spec>
            <artifacts>
                <artifact>Route handler/API contract updates</artifact>
                <artifact>Service-layer business logic updates</artifact>
            </artifacts>
            <acceptance_criteria>
                <criterion>The deliverable for Create Release Readiness Checklist and Performance Tuning Pass is implemented in the referenced files and compiles without breaking adjacent modules.</criterion>
                <criterion>Task output matches the PRD scope (6 System Design performance targets; 10 Milestone Plan phases 5-6) and remains bounded to an atomic &lt;=45-minute implementation chunk.</criterion>
                <criterion>Related endpoint behavior returns the standard success/error envelope and respects auth/public route expectations for the route class.</criterion>
                <criterion>Business rules, tenant scoping, and security constraints relevant to this task are enforced (validation, idempotency, RBAC, webhook/cron protection, etc.).</criterion>
                <criterion>At least one verification artifact (test case, curl call, or fixture-driven check) proves the new behavior works and regressions are covered.</criterion>
            </acceptance_criteria>
            <commit_message>docs(healio): release readiness checklist and performance tuning</commit_message>
        </output_spec>
        <execution_tracking>
            <state>DONE</state>
            <is_done>true</is_done>
            <owner>devops-release-ops</owner>
            <started_at>2026-02-24T23:57:47+08:00</started_at>
            <completed_at>2026-02-24T23:57:47+08:00</completed_at>
            <verification_status>PASSED</verification_status>
            <verification_command>node --import tsx health route check; npm run build; npm run typecheck (rerun sequentially after build)</verification_command>
            <verification_notes>Added `docs/release-checklist.md` and expanded README release/performance notes, tuned Next.js production defaults (`poweredByHeader`, compression, optimized package imports), made React Query cache timing configurable for production, and added analytics cache TTL configurability with minute-bucket cache keys. Build verification also uncovered a Next.js prerender issue on `/login` and `/signup` caused by `useSearchParams()` usage without `Suspense`; both auth pages were wrapped in `Suspense` fallbacks so `next build` now completes successfully. A temporary `typecheck` failure occurred only when run in parallel with `next build` due `.next/types` regeneration; sequential rerun passed.</verification_notes>
            <evidence>
                <item>When work starts/completes, record changed files, test commands, screenshots (UI tasks), and commit/PR references here.</item>
                <item>Changed files: healio/docs/release-checklist.md, healio/README.md, healio/lib/query-client.ts, healio/services/analyticsService.ts, healio/next.config.js, healio/app/(auth)/login/page.tsx, healio/app/(auth)/signup/page.tsx.</item>
                <item>Health endpoint verification passed via direct route invocation (`GET /api/v1/health` => 200 success envelope).</item>
                <item>`npm run build` passed after auth-page `Suspense` patch; build output includes all core dashboard, public booking, billing/payment, and API routes.</item>
                <item>Sequential `npm run typecheck` passed after build (parallel run race with `.next/types` noted and resolved).</item>
                <item>Feature commit: 1a50a2f (docs(healio): release readiness checklist and performance tuning).</item>
            </evidence>
            <completion_signal>Task is done only when state=DONE, is_done=true, completed_at is filled, verification_status=PASSED, and evidence records changed files/tests/screenshots as applicable.</completion_signal>
        </execution_tracking>
        <references>
            <agent_to_execute>Full-Stack Next.js Engineer</agent_to_execute>
            <estimated_complexity>medium</estimated_complexity>
            <blocks_on>HEALIO-054, HEALIO-055, HEALIO-068, HEALIO-069, HEALIO-070, HEALIO-071, HEALIO-072, HEALIO-073, HEALIO-074, HEALIO-075</blocks_on>
            <task_slug>RELEASE_READINESS_CHECKLIST_AND_PERFORMANCE_TUNING</task_slug>
        </references>
    </task_package>
</task_packages>
